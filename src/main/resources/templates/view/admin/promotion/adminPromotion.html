<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>추천 및 세일 관리 - OOTD Admin</title>
    <link rel="stylesheet" href="/css/common/admin/admin_footer.css">
    <link rel="stylesheet" href="/css/common/admin/admin_header.css">
    <link rel="stylesheet" href="/css/common/admin/admin_layout.css">
    <link rel="stylesheet" href="/css/common/reset.css">
    <link rel="stylesheet" href="/css/admin/adminPromotion.css">
</head>
<body>

<header th:replace="~{view/admin/css/admin_header :: admin_header}"></header>

<main class="admin-main">
    <!-- 🔥 사이드바 직접 구현 (문제 있는 참조 제거) -->
    <aside class="admin-sidebar">
        <h2>관리자 메뉴</h2>
        <ul class="sidebar-menu">
            <li><a href="/admin/coupon" class="menu-link">쿠폰 관리</a></li>
            <li><a href="/admin/product" class="menu-link">상품 관리</a></li>
            <li><a href="/admin/promotion" class="menu-link active">추천 및 세일 관리</a></li>
        </ul>
    </aside>

    <div class="admin-content">
        <!-- 페이지 제목 -->
        <div class="page-header">
            <h1 class="page-title">
                <span class="title-icon">⭐</span>
                추천 및 세일 관리
            </h1>
            <p class="page-subtitle">상품의 추천 및 세일 프로모션을 관리합니다</p>
        </div>

        <!-- 탭 네비게이션 -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-target="promotion-list-section">
                <span class="tab-icon">📋</span>
                전체 조회
            </button>
            <button class="tab-btn" data-target="recommended-section">
                <span class="tab-icon">⭐</span>
                추천 관리
            </button>
            <button class="tab-btn" data-target="sale-section">
                <span class="tab-icon">🔥</span>
                세일 관리
            </button>
        </div>

        <!-- 나머지 내용은 기존과 동일... -->
        <!-- 전체 프로모션 조회 섹션 -->
        <div id="promotion-list-section" class="admin-table-container tab-content active">
            <div class="section-header">
                <h2>전체 프로모션 조회</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="refreshPromotionList()">새로고침</button>
                    <button class="btn btn-danger" onclick="cleanupExpiredSales()">만료된 세일 정리</button>
                </div>
            </div>

            <div class="filter-section">
                <div class="filter-group">
                    <label for="filter-type">필터:</label>
                    <select id="filter-type">
                        <option value="all">전체</option>
                        <option value="recommended">추천만</option>
                        <option value="sale">세일만</option>
                        <option value="both">추천+세일</option>
                    </select>
                </div>
            </div>

            <table id="promotion-table" class="admin-table">
                <thead>
                <tr>
                    <th>상품번호</th>
                    <th>상품명</th>
                    <th>브랜드</th>
                    <th>추천</th>
                    <th>우선순위</th>
                    <th>세일</th>
                    <th>할인율</th>
                    <th>원가</th>
                    <th>세일가</th>
                    <th>세일기간</th>
                    <th>관리</th>
                </tr>
                </thead>
                <tbody>
                <!-- 프로모션 목록이 동적으로 추가됩니다 -->
                </tbody>
            </table>
        </div>

        <!-- 추천 관리 섹션 -->
        <div id="recommended-section" class="tab-content" style="display:none;">
            <div class="section-header">
                <h2>추천 상품 관리</h2>
            </div>
            <div class="container">
                <div class="search-section">
                    <h3>상품 검색</h3>
                    <div class="search-form">
                        <input type="text" id="product-search" placeholder="상품명 또는 상품번호로 검색">
                        <button class="btn btn-primary" onclick="searchProducts()">검색</button>
                    </div>
                    <div id="search-results" class="search-results"></div>
                </div>
                <div class="current-recommended">
                    <h3>현재 추천 상품 목록</h3>
                    <div id="recommended-list" class="promotion-list"></div>
                </div>
            </div>
        </div>

        <!-- 세일 관리 섹션 -->
        <div id="sale-section" class="tab-content" style="display:none;">
            <div class="section-header">
                <h2>세일 상품 관리</h2>
            </div>
            <div class="container">
                <div class="search-section">
                    <h3>상품 검색</h3>
                    <div class="search-form">
                        <input type="text" id="sale-product-search" placeholder="상품명 또는 상품번호로 검색">
                        <button class="btn btn-primary" onclick="searchProductsForSale()">검색</button>
                    </div>
                    <div id="sale-search-results" class="search-results"></div>
                </div>
                <div class="current-sale">
                    <h3>현재 세일 상품 목록</h3>
                    <div id="sale-list" class="promotion-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 모달들... (기존과 동일) -->
</main>

<footer th:replace="~{view/admin/css/admin_footer :: admin_footer}"></footer>

<script src="/js/admin/adminPromotion.js"></script>
</body>
</html>