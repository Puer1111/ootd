<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì ë¦½ê¸ˆ - OOTD</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- CSS íŒŒì¼ë“¤ -->
    <link rel="stylesheet" th:href="@{/css/common/footer.css}">
    <link rel="stylesheet" th:href="@{/css/common/header.css}">
    <link rel="stylesheet" th:href="@{/css/common/layout.css}">
    <link rel="stylesheet" th:href="@{/css/point/points.css}">
</head>
<body>

<!-- ê³µí†µ í—¤ë” -->
<header th:replace="~{common/header.html :: header}"></header>

<div class="points-container">
    <!-- ë¡œë”© ìƒíƒœ -->
    <div id="loading" class="loading" style="display: none;">
        ì ë¦½ê¸ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
    </div>

    <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
    <div id="error-message" class="error-message" style="display: none;"></div>

    <!-- ì„±ê³µ ë©”ì‹œì§€ -->
    <div id="success-message" class="success-message" style="display: none;"></div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div id="main-content">
        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="points-header">
            <h1>ğŸ’° ë‚´ ì ë¦½ê¸ˆ</h1>
            <p>ì ë¦½ê¸ˆì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>
        </div>

        <!-- ì ë¦½ê¸ˆ ì¹´ë“œë“¤ -->
        <div class="points-cards">
            <!-- ë©”ì¸ ì ë¦½ê¸ˆ ì¹´ë“œ -->
            <div class="points-card main">
                <div class="card-header">
                    <div class="card-icon">ğŸ’</div>
                    <h2 class="card-title">ì‚¬ìš© ê°€ëŠ¥í•œ ì ë¦½ê¸ˆ</h2>
                </div>
                <div class="card-value" id="available-points-main">0ì›</div>
                <div class="card-description">ì§€ê¸ˆ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì ë¦½ê¸ˆì…ë‹ˆë‹¤</div>
            </div>

            <!-- ì´ ì ë¦½ê¸ˆ -->
            <div class="points-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ“ˆ</div>
                    <h3 class="card-title">ì´ ì ë¦½ê¸ˆ</h3>
                </div>
                <div class="card-value" id="total-points">0ì›</div>
                <div class="card-description">ì§€ê¸ˆê¹Œì§€ ë°›ì€ ëª¨ë“  ì ë¦½ê¸ˆ</div>
            </div>

            <!-- ì‚¬ìš©í•œ ì ë¦½ê¸ˆ -->
            <div class="points-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ›’</div>
                    <h3 class="card-title">ì‚¬ìš©í•œ ì ë¦½ê¸ˆ</h3>
                </div>
                <div class="card-value" id="used-points">0ì›</div>
                <div class="card-description">ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í•œ ì ë¦½ê¸ˆ</div>
            </div>
        </div>

        <!-- ì ë¦½ê¸ˆ í†µê³„ ì„¹ì…˜ -->
        <div class="statistics-section">
            <h3 class="section-title">ğŸ“Š ì ë¦½ê¸ˆ í†µê³„</h3>
            <div class="statistics-grid">
                <div class="stat-item">
                    <div class="stat-value" id="total-earned">0ì›</div>
                    <div class="stat-label">ì´ ì ë¦½ ê¸ˆì•¡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="total-used-history">0ì›</div>
                    <div class="stat-label">ì´ ì‚¬ìš© ê¸ˆì•¡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="purchase-earn-count">0íšŒ</div>
                    <div class="stat-label">êµ¬ë§¤ ì ë¦½ íšŸìˆ˜</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="purchase-use-count">0íšŒ</div>
                    <div class="stat-label">êµ¬ë§¤ ì‚¬ìš© íšŸìˆ˜</div>
                </div>
            </div>
        </div>

        <!-- ì ë¦½ê¸ˆ ë‚´ì—­ ì„¹ì…˜ -->
        <div class="points-history-section">
            <div class="section-header">
                <h3 class="section-title">ğŸ“‹ ì ë¦½ê¸ˆ ë‚´ì—­</h3>

                <div class="section-controls">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">ì „ì²´</button>
                        <button class="filter-btn" data-filter="earn">ì ë¦½</button>
                        <button class="filter-btn" data-filter="use">ì‚¬ìš©</button>
                    </div>

                    <button id="refresh-btn" class="refresh-btn">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                </div>
            </div>

            <div class="points-history-list" id="points-history-list">
                <!-- ì ë¦½ê¸ˆ ë‚´ì—­ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>

            <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
            <div id="pagination" class="pagination" style="display: none;">
                <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ìµœê·¼ í™œë™ ì„¹ì…˜ -->
        <div class="recent-activity-section">
            <div class="section-header">
                <h3 class="section-title">â° ìµœê·¼ í™œë™</h3>

                <div class="section-controls">
                    <div class="filter-buttons">
                        <button class="period-btn active" data-days="7">7ì¼</button>
                        <button class="period-btn" data-days="30">30ì¼</button>
                        <button class="period-btn" data-days="90">90ì¼</button>
                    </div>
                </div>
            </div>

            <div id="recent-activity">
                <!-- ìµœê·¼ í™œë™ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ì ë¦½ë¥  ì •ë³´ -->
        <div class="points-info-section">
            <div class="section-header">
                <h3 class="section-title">â„¹ï¸ ì ë¦½ê¸ˆ ì•ˆë‚´</h3>
            </div>

            <div class="info-content">
                <div class="info-cards">
                    <div class="info-card">
                        <div class="info-icon">ğŸ’¡</div>
                        <h4>ì ë¦½ ë°©ë²•</h4>
                        <ul>
                            <li>ìƒí’ˆ êµ¬ë§¤ ì‹œ ê²°ì œ ê¸ˆì•¡ì˜ 1% ì ë¦½</li>
                            <li>íšŒì›ê°€ì… ì‹œ 1,000ì› ì ë¦½</li>
                            <li>ì´ë²¤íŠ¸ ì°¸ì—¬ ì‹œ ì¶”ê°€ ì ë¦½</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <div class="info-icon">ğŸ¯</div>
                        <h4>ì‚¬ìš© ë°©ë²•</h4>
                        <ul>
                            <li>ìƒí’ˆ ì£¼ë¬¸ ì‹œ ì ë¦½ê¸ˆ ì‚¬ìš© ê°€ëŠ¥</li>
                            <li>1ì› ë‹¨ìœ„ë¡œ ììœ ë¡­ê²Œ ì‚¬ìš©</li>
                            <li>ê²°ì œ ê¸ˆì•¡ í•œë„ ë‚´ì—ì„œ ì‚¬ìš©</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <div class="info-icon">âš ï¸</div>
                        <h4>ì£¼ì˜ì‚¬í•­</h4>
                        <ul>
                            <li>ì ë¦½ê¸ˆ ìœ íš¨ê¸°ê°„: ì ë¦½ì¼ë¡œë¶€í„° 1ë…„</li>
                            <li>í™˜ë¶ˆ ì‹œ ì‚¬ìš©í•œ ì ë¦½ê¸ˆë„ í•¨ê»˜ í™˜ì›</li>
                            <li>ì¼ë¶€ ìƒí’ˆì€ ì ë¦½ ì œì™¸ë  ìˆ˜ ìˆìŒ</li>
                        </ul>
                    </div>
                </div>

                <div id="earn-rate-info" class="earn-rate-section">
                    <!-- ì ë¦½ë¥  ì •ë³´ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>

        <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
        <div class="back-button">
            <a href="/mypage" class="btn btn-outline">â† ë§ˆì´í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</a>
        </div>
    </div>
</div>

<!-- ì ë¦½ê¸ˆ ê³„ì‚°ê¸° ëª¨ë‹¬ -->
<div id="point-calculator-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>ì ë¦½ê¸ˆ ê³„ì‚°ê¸°</h3>
            <span class="close" onclick="closeModal('point-calculator-modal')">&times;</span>
        </div>
        <div class="modal-body">
            <div class="calculator-section">
                <label for="amount-input">êµ¬ë§¤ ì˜ˆì • ê¸ˆì•¡</label>
                <input type="number" id="amount-input" placeholder="ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”" min="0">
                <button id="calculate-btn" class="btn btn-primary">ê³„ì‚°í•˜ê¸°</button>
                <div id="calculation-result" class="calculation-result"></div>
            </div>
        </div>
    </div>
</div>

<!-- ê³µí†µ í‘¸í„° -->
<footer th:replace="~{common/footer.html :: footer}"></footer>

<!-- JavaScript íŒŒì¼ë“¤ -->
<script src="/js/point/pointsAPI.js"></script>
<script src="/js/point/points.js"></script>

<style>
    /* ì¶”ê°€ ìŠ¤íƒ€ì¼ */
    .info-content {
        padding: 30px;
    }

    .info-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .info-card {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 10px;
        border-left: 4px solid #667eea;
    }

    .info-icon {
        font-size: 2rem;
        margin-bottom: 15px;
    }

    .info-card h4 {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 15px;
        color: #333;
    }

    .info-card ul {
        list-style: none;
        padding: 0;
    }

    .info-card li {
        padding: 5px 0;
        color: #666;
        position: relative;
        padding-left: 20px;
    }

    .info-card li::before {
        content: "âœ“";
        color: #28a745;
        font-weight: bold;
        position: absolute;
        left: 0;
    }

    .earn-rate-section {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
    }

    .earn-rate-display h4 {
        margin-bottom: 10px;
        color: #1976d2;
    }

    .rate-value {
        font-size: 2.5rem;
        font-weight: 700;
        color: #1976d2;
        margin-bottom: 10px;
    }

    .rate-example {
        font-size: 1.1rem;
        color: #666;
    }

    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        background: white;
        border-radius: 10px;
        max-width: 500px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 30px;
        border-bottom: 1px solid #e9ecef;
    }

    .modal-header h3 {
        margin: 0;
        color: #333;
    }

    .close {
        font-size: 1.5rem;
        cursor: pointer;
        color: #666;
    }

    .close:hover {
        color: #333;
    }

    .modal-body {
        padding: 30px;
    }

    .calculator-section {
        text-align: center;
    }

    .calculator-section label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        color: #333;
    }

    .calculator-section input {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 1rem;
        margin-bottom: 20px;
    }

    .calculation-result {
        margin-top: 20px;
        padding: 15px;
        background: #e3f2fd;
        border-radius: 6px;
        font-size: 1.1rem;
        font-weight: 600;
        color: #1976d2;
        min-height: 20px;
    }

    .back-button {
        text-align: center;
        margin-top: 40px;
        padding-top: 30px;
        border-top: 1px solid #e9ecef;
    }

    /* ë°˜ì‘í˜• ì¶”ê°€ */
    @media (max-width: 768px) {
        .info-cards {
            grid-template-columns: 1fr;
        }

        .modal-content {
            margin: 20px;
        }

        .modal-header, .modal-body {
            padding: 20px;
        }
    }
</style>

</body>
</html>